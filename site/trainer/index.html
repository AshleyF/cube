<!DOCTYPE html>
<html lang=en>
    <head>
        <title>LL Trainer v0.1</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <script src="jquery.min.js"></script>
        <script src="roofpig_and_three.min.js"></script>
        <script src="cube.js"></script>
        <script src="display.js"></script>
        <script src="giiker.js"></script>
        <script src="ui.js"></script>
        <script>
            function update(cube) {
                Display.displayLL(Cube.faces(cube), "ll");
            }

            function load() {
                function delay() { settingsUpdate(); }
                window.setTimeout(delay, 1);
            }

            function settingsUpdate() {
                function addAlgIfChecked(name, kind) {
                    var cb = document.getElementById(name);
                    if (!cb.checked) return false;
                    Ui.settings.cases.push({ alg: cb.value, kind: kind });
                    return true;
                }
                Ui.settings.method = document.getElementById("method").value;
                Ui.settings.yellow = document.getElementById("yellow").checked;
                Ui.settings.white = document.getElementById("white").checked;
                Ui.settings.red = document.getElementById("red").checked;
                Ui.settings.orange = document.getElementById("orange").checked;
                Ui.settings.green = document.getElementById("green").checked;
                Ui.settings.blue = document.getElementById("blue").checked;
                if (!Ui.settings.yellow && !Ui.settings.white && !Ui.settings.red && !Ui.settings.orange && !Ui.settings.green && !Ui.settings.blue) {
                    // default
                    document.getElementById("yellow").checked = true;
                    Ui.settings.yellow = true;
                }
                document.getElementById("anyColor").checked = (Ui.settings.yellow && Ui.settings.white && Ui.settings.red && Ui.settings.orange && Ui.settings.green && Ui.settings.blue);
                Ui.settings.auf = document.getElementById("auf").checked;
                Ui.settings.cases = [];
                // OCLL
                var ocllCases = ["ocll_s", "ocll_as", "ocll_l", "ocll_u", "ocll_t", "ocll_pi", "ocll_h"];
                var c = 0;
                for (var i = 0; i < ocllCases.length; i++) {
                    c += addAlgIfChecked(ocllCases[i], "ocll");
                }
                document.getElementById("anyOcllCase").checked = (c == ocllCases.length);
                // PCLL
                var pcllCases = ["pcll_a", "pcll_d"];
                c = 0;
                for (var i = 0; i < pcllCases.length; i++) {
                    c += addAlgIfChecked(pcllCases[i], "pcll");
                }
                document.getElementById("anyPcllCase").checked = (c == pcllCases.length);
                // test
                addAlgIfChecked("test", "ocll");
                Ui.next();
            }

            function settingsAnyColorUpdate() {
                var any = document.getElementById("anyColor").checked;
                document.getElementById("yellow").checked = true; // always
                document.getElementById("white").checked = any;
                document.getElementById("red").checked = any;
                document.getElementById("orange").checked = any;
                document.getElementById("green").checked = any;
                document.getElementById("blue").checked = any;
                settingsUpdate();
            }

            function settingsAnyOcllCaseUpdate() {
                var any = document.getElementById("anyOcllCase").checked;
                document.getElementById("ocll_s").checked = any; // always
                document.getElementById("ocll_as").checked = any;
                document.getElementById("ocll_l").checked = any;
                document.getElementById("ocll_u").checked = any;
                document.getElementById("ocll_t").checked = any;
                document.getElementById("ocll_pi").checked = any;
                document.getElementById("ocll_h").checked = any;
                settingsUpdate();
            }

            function settingsAnyPcllCaseUpdate() {
                var any = document.getElementById("anyPcllCase").checked;
                document.getElementById("pcll_a").checked = any; // always
                document.getElementById("pcll_d").checked = any;
                settingsUpdate();
            }
        </script>
    </head>
    <body onload="load()" style="background: black">
        <h1 id="status">&nbsp;</h1>
        <div id="controls">
            <button id="giiker" onclick="Ui.giiker()">Connect</button>
            <button id="retry" onclick="Ui.retry()" disabled="disabled">Retry</button>
            <button id="next" onclick="Ui.next()">Next</button>
        </div>
        <div id="ll"></div>
        <fieldset>
            <legend>Method</legend>
            <select id="method" onchange="settingsUpdate()">
                <option value="cfop">CFOP</option>
                <option value="roux" selected="selected">Roux</option>
            </select>
        </fieldset>
        <fieldset>
            <legend>Up Color</legend>
            <input id="anyColor" type="checkbox" value="anyColor" onchange="settingsAnyColorUpdate()"><label for="anyColor">Any</label>
            <hr style="border-color:#222;" />
            <input id="yellow" type="checkbox" value="yellow" checked="checked" onchange="settingsUpdate()"><label for="yellow">Yellow</label><br />
            <input id="white" type="checkbox" value="white" onchange="settingsUpdate()"><label for="white">White</label><br />
            <input id="red" type="checkbox" value="red" onchange="settingsUpdate()"><label for="red">Red</label><br />
            <input id="orange" type="checkbox" value="orange" onchange="settingsUpdate()"><label for="orange">Orange</label><br />
            <input id="green" type="checkbox" value="green" onchange="settingsUpdate()"><label for="green">Green</label><br />
            <input id="blue" type="checkbox" value="blue" onchange="settingsUpdate()"><label for="blue">Blue</label><br />
        </fieldset>
        <fieldset>
            <legend>Miscellaneous</legend>
            <input id="auf" type="checkbox" value="auf" checked="checked" onchange="settingsUpdate()"><label for="auf">Random AUF</label><br />
        </fieldset>
        <fieldset>
            <legend>OCLL</legend>
            <input id="anyOcllCase" type="checkbox" value="anyOcllCase" onchange="settingsAnyOcllCaseUpdate()"><label for="anyOcllCase">Any</label>
            <hr style="border-color:#222;" />
            <input id="ocll_s" type="checkbox" value="R U R' U R U2 R'" onchange="settingsUpdate()"><label for="ocll_s">Sune</label><br />
            <input id="ocll_as" type="checkbox" value="R' U' R U' R' U2 R" onchange="settingsUpdate()"><label for="ocll_as">Anti-Sune</label><br />
            <input id="ocll_l" type="checkbox" value="R U2 R' U' R U R' U' R U R' U' R U' R'" onchange="settingsUpdate()">L case (bow tie, triple-sune)<label for="ocll_l"></label><br />
            <input id="ocll_u" type="checkbox" value="F R U R' U' F'" onchange="settingsUpdate()"><label for="ocll_u">U case (headlights)</label><br />
            <input id="ocll_t" type="checkbox" value="R U R' U' R' F R F'" onchange="settingsUpdate()"><label for="ocll_t">T case (blinkers, chameleon)</label><br />
            <input id="ocll_pi" type="checkbox" value="F R U R' U' R U R' U' F'" onchange="settingsUpdate()"><label for="ocll_pi">Pi case (bruno)</label><br />
            <input id="ocll_h" type="checkbox" value="F R U R' U' R U R' U' R U R' U' F'" onchange="settingsUpdate()"><label for="ocll_h">H case (double-headlights, double-sune)</label><br />
        </fieldset>
        <fieldset>
            <legend>PCLL</legend>
            <input id="anyPcllCase" type="checkbox" value="anyPcllCase" onchange="settingsAnyPcllCaseUpdate()"><label for="anyPcllCase">Any</label>
            <hr style="border-color:#222;" />
            <input id="pcll_a" type="checkbox" value="R U R' F' R U R' U' R' F R2 U' R'" onchange="settingsUpdate()"><label for="pcll_a">Adjacent</label><br />
            <input id="pcll_d" type="checkbox" value="F R U' R' U' R U R' F' R U R' U' R' F R F'" onchange="settingsUpdate()"><label for="pcll_d">Diagonal</label><br />
        </fieldset>
        <fieldset>
            <legend>Test</legend>
            <input id="test" type="checkbox" value="F R" onchange="settingsUpdate()"><label for="test">Test</label><br />
        </fieldset>
        <hr />
        <button onclick="Ui.twist(prompt('Twists'))">SimTwists</button>
    </body>
</html>